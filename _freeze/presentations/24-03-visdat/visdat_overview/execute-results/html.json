{
  "hash": "9cc24fb5f43d7867f706e8717e5111aa",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"visdat Overview\"\noutput: html_document\ndate: \"2024-03-26\"\n---\n\n\n\n\n\n## visdat\n\nvisdat is a package which allows you to get a quick visual glance at the variable classes of a dataframe to identify problems or unexpected features. \\\nAre you just trying to get a vibe for the data? \\\nAre there unexpected NAs, strangely large values, or strings out of place?\n\nvisdat can help check these things before you start trying to clean and wrangle your messy data\n\n## An example\n\nLet's look at the airquality dataset\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nairquality <- airquality\n\nhead(airquality)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n  Ozone Solar.R Wind Temp Month Day\n1    41     190  7.4   67     5   1\n2    36     118  8.0   72     5   2\n3    12     149 12.6   74     5   3\n4    18     313 11.5   62     5   4\n5    NA      NA 14.3   56     5   5\n6    28      NA 14.9   66     5   6\n```\n\n\n:::\n:::\n\n\n\n## vis_dat()\n\nWe can use vis_dat() to get an overview of the classes of data and any NAs present\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nvis_dat(airquality)\n```\n\n::: {.cell-output-display}\n![](visdat_overview_files/figure-html/vis_dat()-1.png){width=672}\n:::\n:::\n\n\n\nWe can also facet\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nvis_dat(airquality, facet = Month)\n```\n\n::: {.cell-output-display}\n![](visdat_overview_files/figure-html/facet-1.png){width=672}\n:::\n:::\n\n\n\n## vis_miss()\n\nvis_miss() is similar to vis_dat() but it will show you the percentage of missing data\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nvis_miss(airquality)\n```\n\n::: {.cell-output-display}\n![](visdat_overview_files/figure-html/vis_miss()-1.png){width=672}\n:::\n:::\n\n\n\nThere isn't a strong use for vis_miss() over vis_dat() but it will give you the percentage of NAs in your dataset, which is useful if there are very few NAs\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ntest_miss_df <- data.frame(x1 = 1:10000,\n                           x2 = rep(\"A\", 10000),\n                           x3 = c(rep(1L, 9999), NA))\n\nvis_dat(test_miss_df)\n```\n\n::: {.cell-output-display}\n![](visdat_overview_files/figure-html/miss vs dat-1.png){width=672}\n:::\n\n```{.r .cell-code}\nvis_miss(test_miss_df)\n```\n\n::: {.cell-output-display}\n![](visdat_overview_files/figure-html/miss vs dat-2.png){width=672}\n:::\n:::\n\n\n\n## vis_compare()\n\nvis_compare() will allow you to compare two dataframes (of the same length!) to highlight their differences and similarities\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nset.seed(2019-04-03-1105)\nchickwts_diff <- chickwts\nchickwts_diff[sample(1:nrow(chickwts), 30),sample(1:ncol(chickwts), 2)] <- NA\n\nvis_compare(chickwts_diff, chickwts)\n```\n\n::: {.cell-output-display}\n![](visdat_overview_files/figure-html/vis_compare()-1.png){width=672}\n:::\n:::\n\n\n\n## vis_expect() - very useful\n\nI think vis_expect() is a very useful function, as it can allow you to set thresholds for checking data using binary operators. What percentage of values are over 25? Are there strange outliers?\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nvis_expect(airquality, ~.x >= 25)\n```\n\n::: {.cell-output-display}\n![](visdat_overview_files/figure-html/vis_expect()-1.png){width=672}\n:::\n:::\n\n\n\nPerhaps there are strings that shouldn't be strings. You could simply clean this with a bad_strings vector, but we can also have a look at where those issues lie more broadly, and potentially find patterns. If you clean your data without knowing the cause, you could end up hiding problems, rather than resolving them.\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ncommon_nas <- c(\n  \"NA\",\n  \"N A\",\n  \"N/A\",\n  \"na\",\n  \"n a\",\n  \"n/a\"\n)\n\ndat_ms <- tibble::tribble(~x,  ~y,    ~z,\n                          \"1\",   \"A\",   -100,\n                          \"3\",   \"N/A\", -99,\n                          \"NA\",  NA,    -98,\n                          \"N A\", \"E\",   -101,\n                          \"na\", \"F\",   -1)\n\nvis_expect(dat_ms, ~.x %in% common_nas)\n```\n\n::: {.cell-output-display}\n![](visdat_overview_files/figure-html/na checking-1.png){width=672}\n:::\n:::\n\n\n\n## vis_cor()\n\nThis will show you correlations in your data - not super exciting\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nvis_cor(airquality)\n```\n\n::: {.cell-output-display}\n![](visdat_overview_files/figure-html/vis_cor()-1.png){width=672}\n:::\n:::\n\n\n\n## vis_value()\n\nvis_value() provides a nice overview of the relative differences in the columns of your data, allowing you to potentially find outliers at a glance\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nvis_value(airquality)\n```\n\n::: {.cell-output-display}\n![](visdat_overview_files/figure-html/vis_value()-1.png){width=672}\n:::\n:::\n\n\n\nIf you're using a dataset that has non-numeric data, you will get an error\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ngapminder <- read.csv(\"https://raw.githubusercontent.com/resbaz/r-novice-gapminder-files/master/data/gapminder-FiveYearData.csv\")\n\nvis_value(gapminder)\n```\n\n::: {.cell-output .cell-output-error}\n\n```\nError in `test_if_all_numeric()`:\n! Data input can only contain numeric values\nPlease subset the data to the numeric values you would like.\n`dplyr::select(<data>, where(is.numeric))`\nCan be helpful here!\n```\n\n\n:::\n:::\n\n\n\nWe can use dplyr to select just the numeric columns from our dataset\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ngapminder %>% \n  select(where(is.numeric)) %>% \n  vis_value()\n```\n\n::: {.cell-output-display}\n![](visdat_overview_files/figure-html/numeric-1.png){width=672}\n:::\n:::\n\n\n\n## vis_binary()\n\nI'm not sure how often this would come up either, but it allows you to quickly visualise the spread of binary data.\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nvis_binary(dat_bin)\n```\n\n::: {.cell-output-display}\n![](visdat_overview_files/figure-html/vis_binary()-1.png){width=672}\n:::\n:::\n\n\n\n## vis_guess() - very useful\n\nvis_guess() is a standout for me. It will take a stab at guessing what class of data is in each cell. Do you have numbers in strings, or intergers in numeric classes?\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nmessy_vector <- c(TRUE,\n                  T,\n                  \"TRUE\",\n                  \"T\",\n                  \"01/01/01\",\n                  \"01/01/2001\",\n                  NA,\n                  NaN,\n                  \"NA\",\n                  \"Na\",\n                  \"na\",\n                  \"10\",\n                  10,\n                  \"10.1\",\n                  10.1,\n                  \"abc\",\n                  \"$%TG\")\n\nset.seed(2019-04-03-1106)\nmessy_df <- data.frame(var1 = messy_vector,\n                       var2 = sample(messy_vector),\n                       var3 = sample(messy_vector))\n\n\nvis_guess(messy_df)\n```\n\n::: {.cell-output-display}\n![](visdat_overview_files/figure-html/vis_guess()-1.png){width=672}\n:::\n\n```{.r .cell-code}\nvis_dat(messy_df)\n```\n\n::: {.cell-output-display}\n![](visdat_overview_files/figure-html/vis_guess()-2.png){width=672}\n:::\n:::\n\n\n\nLet's look at gapminder too\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nvis_guess(gapminder)\n```\n\n::: {.cell-output-display}\n![](visdat_overview_files/figure-html/gapminder guess-1.png){width=672}\n:::\n:::\n\n\n\nAnd that's visdat! Hopefully you find it useful, or interesting, or at least encourages you to have methods to properly check your data before cleaning and analysis.\n",
    "supporting": [
      "visdat_overview_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}